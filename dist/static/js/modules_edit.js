var fOnLoad;fOnLoad=function(){var e,t,r;return document.title="Edit Modules",$("#pagetitle").text("{{{user.username}}}, edit your Modules!"),$("#module_type").change(function(){return t()}),e=function(e){return function(t){var r;return 401===t.status?window.location.href="forge?page=edit_modules":(r=function(){var r,o;if(""===t.responseText)r="No Response from Server!";else try{o=JSON.parse(t.responseText),r=o.message}catch(n){}return $("#info").text(e+r),$("#info").attr("class","error")},setTimeout(r,500))}},t=function(){var t;return t="Event Trigger"===$("#module_type").val()?"get_event_triggers":"get_action_dispatchers",$.post("/usercommand/"+t).done(r).fail(e("Did not retrieve rules! "))},r=function(e){var t,r,o,n,i,d;$("#tableModules tr").remove(),n=JSON.parse(e.message),i=[];for(o in n)d=$("<tr>"),r=$("<div>").text(o),t=$("<img>").attr("class","del").attr("title","Delete Module").attr("src","images/red_cross_small.png"),d.append($("<td>").append(t)),t=$("<img>").attr("class","log").attr("title","Edit Module").attr("src","images/edit.png"),d.append($("<td>").append(t)),d.append($("<td>").append(r)),i.push($("#tableModules").append(d));return i},t(),$("#tableModules").on("click","img.del",function(){var r,o,n;return n=$("div",$(this).closest("tr")).text(),confirm("Do you really want to delete the Module '"+n+"'? The module might still be active in some of your rules!")?(r="Event Trigger"===$("#module_type").val()?"delete_event_trigger":"delete_action_dispatcher",o={body:JSON.stringify({id:n})},$.post("/usercommand/"+r,o).done(t).fail(e("Could not delete module! "))):void 0}),$("#tableModules").on("click","img.log",function(){var e;return e=encodeURIComponent($("div",$(this).closest("tr")).text()),window.location.href="Event Trigger"===$("#module_type").val()?"forge?page=forge_module&type=event_trigger&id="+e:"forge?page=forge_module&type=action_dispatcher&id="+e})},window.addEventListener("load",fOnLoad,!0);