var fFindKeyStringPair,fOnLoad;fFindKeyStringPair=function(e){var t,n,r;for(t in e){if(r=e[t],"string"==typeof r||"number"==typeof r)return{key:t,val:r};if("object"==typeof r&&(n=fFindKeyStringPair(r)))return n}return null},fOnLoad=function(){var e;return document.title="Push Events!",$("#pagetitle").text("Trigger your custom event in the engine!"),e=ace.edit("editor"),e.setTheme("ace/theme/cimson_editor"),e.setFontSize("18px"),e.getSession().setMode("ace/mode/json"),e.setShowPrintMargin(!1),$("#editor").css("height","400px"),$("#editor").css("width","600px"),$("#editor_theme").change(function(t){return e.setTheme("ace/theme/"+$(this).val())}),$("#editor_font").change(function(t){return e.setFontSize($(this).val())}),$("#but_submit").click(function(){var t,n;try{return n=e.getValue(),JSON.parse(n),window.scrollTo(0,0),$.post("/event",n).done(function(e){return $("#info").text(e.message),$("#info").attr("class","success")}).fail(function(e){var t;return 401===e.status?window.location.href="forge?page=forge_event":(t=function(){return""===e.responseText&&(e.responseText="No Response from Server!"),$("#info").text("Error in upload: "+e.responseText),$("#info").attr("class","error")},setTimeout(t,500))})}catch(r){return t=r,$("#info").text("You have errors in your JSON object! "+t),$("#info").attr("class","error")}}),$("#but_prepare").on("click",function(){var t,n,r,o,i;try{return r=JSON.parse(e.getValue()),r.eventname&&"string"==typeof r.eventname&&""!==r.eventname?(o="",r.body&&"object"==typeof r.body&&(n=fFindKeyStringPair(r.body),n&&(o="&selkey="+n.key+"&selval="+n.val)),i="forge?page=forge_rule&eventtype=custom&eventname="+r.eventname+o,window.open(i,"_blank")):($("#info").text("Please provide a valid eventname"),$("#info").attr("class","error"))}catch(a){return t=a,$("#info").text("You have errors in your JSON object! "+t),$("#info").attr("class","error")}})},window.addEventListener("load",fOnLoad,!0);